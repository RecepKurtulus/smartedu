<%- include ('partials/_header.ejs'); %>

    <%- include ('partials/_navigation.ejs'); %>
	
	<div class="all-title-box">
		<div class="container text-center">
			<h1>Welcome <%= user.name %><span class="m_1"><%= user.role %></span></h1>
		</div>
	</div>
	<% if(user.role == "Teacher" || user.role == "Admin") { %>
		<div class="text-center mt-2">
		  <button type="button" class="btn btn-warning btn-lg" onclick="showCreateCourseForm()">Create Course</button>
		</div>
	  <% } %>
	  
	  <div id="overlay" style="display: none;"></div>
	  
	  <div id="createCourseForm" style="display: none;">
		<form method="POST" action="/courses/createCourse">
		  <div class="mb-3">
			<label class="form-label">Course Name</label>
			<input type="text" class="form-control" name="name">
			<input type="hidden" name="role" value="<%= user.role %>">
			<input type="hidden" name="teacherName" value="<%= user.name %>">
			
		  </div>
		  <div class="mb-3">
			<label  class="form-label">Course Description</label>
			<input type="text" class="form-control" name="description">
		  </div>
		  <div class="mb-3">
			<label  class="form-label">Video ID</label>
			<input type="text" class="form-control" name="videoLink">
		  </div>
		  <div class="mb-3">
			<select class="form-control" name="category">
				<% for(var i = 0; i < categories.length; i++) { %>
					<option value="<%= categories[i]._id %>"><%= categories[i].slug %></option>
				  <% } %>
			</select>
		  </div>
		  
		  
		  <button type="submit"  value="CreateCourse"class="btn btn-warning">Create</button>
		  <div onclick="closeCreateCourseForm()" class="btn btn-danger">Close</div>
		</form>
		
	  </div>
	  
	  <script>
		function showCreateCourseForm() {
		  var overlay = document.getElementById("overlay");
		  var createCourseForm = document.getElementById("createCourseForm");
	  
		  overlay.style.display = "block";
		  createCourseForm.style.display = "block";
		}
		function closeCreateCourseForm() {
		  var overlay = document.getElementById("overlay");
		  var createCourseForm = document.getElementById("createCourseForm");
	  
		  overlay.style.display = "none";
		  createCourseForm.style.display = "none";
		}
	  </script>
	  
<!---Giriş yapan kişinin ünvanı teacher ise tüm bunları yap -->

    <div id="overviews" class="section wb">
        <div class="container">
            <div class="row"> 
                <div class="col-lg-12 blog-post-single">					
					<div class="blog-author">
						<div class="author-bio">
							<h3 class="author_name"><a href="#"><%= user.name %></a></h3>
							<h5><%= user.role %></h5>
							<p class="author_det">
								<%= user.bio %>
							</p>
						</div>
						<div class="author-desc">
							<img src="images/author.jpg" alt="about author">
						</div>
					</div>
					
                </div><!-- end col -->
            </div><!-- end row -->
			<div class="row mt-5"> 
				<% for(let i=0; i < courses.length; i++) { %>
                <div class="col-lg-6 col-md-6 col-12">
                    <div class="course-item mb-5">
						<div class="image-blog">
							<img src="https://img.youtube.com/vi/<%= courses[i].videoLink %>/maxresdefault.jpg" style="height: 300px; width: 600px;"  class="img-fluid">
						</div>
						<div class="course-br">
							<div class="course-title">
								<h2><a href="../courses/<%= courses[i].slug %>" title=""><%= courses[i].name %> </a></h2>
							</div>
							<div class="course-desc">
								<p><%= courses[i].description %></p>
							</div>
						</div>
					</div>
                </div><!-- end col -->
				<% } %>
				<% for(let i=0; i < user.courses.length; i++) { %>
					<div class="col-lg-6 col-md-6 col-12">
						<div class="course-item mb-5">
							<div class="image-blog">
								<img src="https://img.youtube.com/vi/<%= user.courses[i].videoLink %>/maxresdefault.jpg" style="height: 300px; width: 600px;"  class="img-fluid">
							</div>
							<div class="course-br">
								<div class="course-title">
									<h2><a href="../courses/<%= user.courses[i].slug %>" title=""><%= user.courses[i].name %> </a></h2>
								</div>
								<div class="course-desc">
									<p><%= user.courses[i].description %></p>
								</div>
							</div>
						</div>
					</div><!-- end col -->
					<% } %>
              
				  
            </div><!-- end row -->
        </div><!-- end container -->
    </div><!-- end section -->

	<%- include ('partials/_footer.ejs'); %>